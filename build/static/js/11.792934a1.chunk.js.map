{"version":3,"sources":["containers/GtmNav.js","views/liste/Essai.js","views/liste/Essais.js"],"names":["GtmTab","aria-current","to","color","variant","style","marginRight","size","name","className","Essai","props","useContext","EssaiContext","globalData","setGlonbalData","lg","essai","id","idTypeEssai","nomTypeEssai","nomInstitution","sigleInstitution","emailInstitution","telephone1Institution","adresseInstitution","descriptionInstitution","latitudePosition","longitudePosition","altitudePosition","departementPosition","dateRealisationEssai","onClick","selectedEssai","idFichier","Essais","useState","details","setDetails","data","setData","useEffect","setLoadingState","fetch","then","response","json","essaiDetailsDto","catch","error","console","log","setTotalEssais","fetch_with_pagination","pageSize","pageNumber","loadingState","setPageSize","currentPage","setActivePage","totalEssais","href","loading","float","onChange","e","parseInt","target","value","items","fields","key","label","_style","width","sorter","filter","responsive","outlined","tableFilter","itemsPerPage","hover","scopedSlots","item","index","shape","position","indexOf","newDetails","slice","splice","toggleDetails","includes","show","activePage","pages","Math","floor","onActivePageChange"],"mappings":"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","file":"static/js/11.792934a1.chunk.js","sourcesContent":["import React from 'react';\nimport {\n  CLink,\n  CButton\n} from '@coreui/react'\nimport CIcon from '@coreui/icons-react';\n\n\nconst GtmTab = () => {\n  return (\n   <>\n    <CLink aria-current=\"page\" to=\"/dashboard\" >\n    <CButton color=\"dark\" variant='outline' style={{marginRight:5}}><CIcon size=\"sm\" name=\"cil-location-pin\" /><span className=\"mfs-2\">Carte</span></CButton>\n    </CLink>\n    <CLink aria-current=\"page\" to=\"/liste\">\n    <CButton color=\"dark\" variant='outline'><CIcon size=\"sm\" name=\"cil-list-rich\" /><span className=\"mfs-2\">Liste</span></CButton>\n    </CLink>\n   </>\n  )\n}\n\nexport default GtmTab\n","import React, { useContext } from \"react\";\nimport { CCard, CCardBody, CCardHeader, CCol, CRow } from '@coreui/react'\nimport { Link } from 'react-router-dom';\nimport { EssaiContext } from \"../../EssaisContext\";\n\nconst Essai = (props) => {\n  const [globalData, setGlonbalData] = useContext(EssaiContext);\n  const handleOnClick = (essai) => {\n    setGlonbalData({...globalData, \n      selectedEssai: essai})\n  }\n  return (\n    <CRow>\n      <CCol lg={6}>\n        <CCard>\n          <CCardHeader  className=\"text-muted\">\n           Identifiant de l'essai : {props.essai.id}\n          </CCardHeader>\n          <CCardBody>\n            <ul>\n            <li>Type d'essai :\n              {props.essai.idTypeEssai ?    <Link \n                to={`/type_essais/edit/${props.essai.idTypeEssai}`} \n                >{props.essai.nomTypeEssai}\n                </Link> \n                : ''}\n              </li>\n              <li>\n                <details>\n                  <summary>Institution : {props.essai.nomInstitution} ({props.essai.sigleInstitution})</summary>\n                  <ul>\n                    <li>Email : {props.essai.emailInstitution}</li>\n                    <li>Téléphone : {props.essai.telephone1Institution}</li>\n                    <li>Adresse : {props.essai.adresseInstitution}</li>\n                    <li>À propos : {props.essai.descriptionInstitution}</li>\n                  </ul>\n                </details>\n              </li>\n              {/* <li>Coordonnées : ({props.essai.position.latitude}, {props.essai.position.longitude}, {props.essai.position.altitude})</li>\n              <li>Adresse : {props.essai.position.adresse}</li> */}\n              <li>Latitute : {props.essai.latitudePosition}</li>\n              <li>Longitude : {props.essai.longitudePosition}</li>\n              <li>Altitude : {props.essai.altitudePosition}</li>\n              <li>Département : {props.essai.departementPosition}</li>\n              {/* <li>Créé le : {props.essai.createdDateEssai}</li> */}\n              <li>Date de réalisation: {props.essai.dateRealisationEssai}</li>\n              {/* <li>Dernière modification : {props.essai.lastModifiedDateEssai}</li>\n              <li>Modifié par: <a href=\"www.google.com\">{props.essai.lastModifiedByEssai}</a></li> */}\n              <li onClick={() => handleOnClick(props.essai)}><Link \n                to={`/pdf/${props.essai.idFichier}`} \n                >Voir PDF\n                </Link></li>\n            </ul>\n          </CCardBody>\n        </CCard>\n      </CCol>\n    </CRow>\n  )\n}\n\nexport default Essai\n","import React, { useState, useEffect } from 'react'\nimport {\n  CDataTable,\n  CButton,\n  CCollapse,\n  CSelect,\n  CPagination,\n  CRow,\n  CCol,\n} from '@coreui/react'\nimport Test from \"./Essai\";\nimport ClipLoader from \"react-spinners/ClipLoader\";\nimport GtmTab from \"../../containers/GtmNav\";\n\n// import { EssaiContext } from \"../../EssaisContext\";\n\n  const Essais = () => {\n    // const [globalData, setGlobalData] = useContext(EssaiContext);\n  const [details, setDetails] = useState([])\n\n  const toggleDetails = (index,id) => {\n    const position = details.indexOf(index)\n    let newDetails = details.slice()\n    if (position !== -1) {\n      newDetails.splice(position, 1)\n    } else {\n      newDetails = [...details, index]\n    }\n\n    setDetails(newDetails)\n  }\n\n  const fields = [\n    { key: 'codeEssai', label:'Code', _style: { width: '2%'} },\n    { key: 'nomTypeEssai', label:'Type d\\'essai', _style: { width: '20%'} },\n    { key: 'nomInstitution', label:'Institution', _style: { width: '20%'} },\n    // { key: 'departement', label:'Département', _style: { width: '20%'} },\n    // { key: 'adresse', label:'Adresse', _style: { width: '20%'} },\n    { key: 'nomFichier', label:'Fichier', _style: { width: '20%'} },\n    { key: 'dateRealisationEssai', label:'Date de réalisation', _style: { width: '10%'} },\n    {\n      key: 'show_details',\n      label: 'Actions',\n      _style: { width: '1%' },\n      sorter: false,\n      filter: false\n    }\n  ]\n\n  // const onDelete = (id) => {\n  //   if (window.confirm(\"Confirmer la suppression\")) {\n  //     const requestOptions = {\n  //       method: 'DELETE'\n  //     };\n  //     fetch(`${process.env.REACT_APP_API_URL}/api/essais/`+id, requestOptions)\n  //       .then(response => console.log(response))\n  //     const newList = data.filter((item) => item.id !== id);\n  //     setData(newList);\n  //   } else {\n      \n  //   }\n  // }\n\n  \n  const [data, setData] = useState([])\n  useEffect(() => {\n    setLoadingState(true);\n\n    fetch(`http://localhost:8080/api/essais/fetch_with_pagination?pageSize=5&pageNumber=0`)\n      .then((response) => response.json())\n      .then((json) => setData(json.essaiDetailsDto))\n      .then(() => setLoadingState(false))\n      .catch((error) => {\n        console.log(error);\n        setLoadingState(false);\n      }); \n\n      fetch(`http://localhost:8080/api/essais/count`)\n      .then((response) => response.json())\n      .then((json) => setTotalEssais(json))\n      .catch((error) => {\n        console.log(error);\n      }); \n    \n  }, []);\n\n  const fetch_with_pagination = (pageSize, pageNumber) => {\n    // console.log('fetch pagiination')\n    fetch(`http://localhost:8080/api/essais/fetch_with_pagination?pageSize=${pageSize}&pageNumber=${pageNumber > 0 ? pageNumber : 0}`)\n    .then((response) => response.json())\n    .then((json) => setData(json.essaiDetailsDto))\n    .then(() => setLoadingState(false))\n    .catch((error) => {\n      console.log(error);\n      setLoadingState(false);\n    }); \n  }\n  const [loadingState, setLoadingState] = useState(false);\n\n \n    //  const getInstitutionOfActualUser = () =>{\n    //   //   var idIns;\n    //     fetch(`${process.env.REACT_APP_API_URL}/api/utilisateurs/search?username=${UserService.getUsername()}`)\n    //   .then((response) => response.json())\n    //   //   return idIns;   // The function returns the product of p1 and p2\n\n    //   }\n  \n    const [pageSize, setPageSize] = useState(5)\n    const [currentPage, setActivePage] = useState(0);\n    const [totalEssais, setTotalEssais] = useState(0);\n\n  return (\n    <div>\n< GtmTab />\n\n          <a href=\"#\" >   \n            {/* <CButton variant=\"outline\" color=\"success\">Ajouter</CButton> */}\n            <ClipLoader loading={loadingState} size={25} />\n         </a>\n         <CRow style={{float:'right'}}>\n        <CCol > Essais par page\n            <CSelect name=' Essais par page' onChange={(e)=>{\n                setPageSize(parseInt(e.target.value));\n                  fetch_with_pagination(e.target.value <= totalEssais ? e.target.value : totalEssais, 0);\n              \n              }}\n              className={`form-control shadow-none `}>\n                      <option value={5}>5</option>\n                        <option value={10}>10</option>\n                        <option value={20}>20</option>\n                        <option value={50}>50</option>\n              </CSelect>\n          </CCol>\n          </CRow>\n            \n          <CDataTable\n      items={data ? data : null}\n      fields={fields}\n      responsive\n      outlined\n      tableFilter\n      itemsPerPage ={pageSize}\n      hover\n      sorter\n      // footer\n      // itemsPerPageSelect\n      // pagination\n      scopedSlots = {{\n        'show_details':\n          (item, index)=>{\n            return (\n              <td className=\"py-2\">\n                <CButton\n                  color=\"primary\"\n                  variant=\"outline\"\n                  shape=\"square\"\n                  size=\"sm\"\n                  onClick={()=>{toggleDetails(index,item.id)}}\n                >\n                  {details.includes(index) ? 'Cacher' : 'Voir'}\n                </CButton>                          \n              </td>\n              )\n          },\n        \n        'details':\n            (item, index)=>{\n              return (\n              <CCollapse show={details.includes(index)}>\n                <Test essai = {item} />\n              </CCollapse>\n            )\n          }\n      }}\n    />\n        <CPagination\n      activePage={currentPage}\n      pages={Math.floor(totalEssais/pageSize)}\n      onActivePageChange={(pageNumber) =>{\n        setActivePage(pageNumber);\n        fetch_with_pagination(pageSize,pageNumber-1);\n      } }\n    ></CPagination>\n    </div>\n    \n  )\n    }\n  export default Essais"],"sourceRoot":""}